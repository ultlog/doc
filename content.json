{"pages":[{"title":"About","date":"2020-07-29T14:02:42.909Z","path":"about/index.html","text":"关于链接github"},{"title":"Categories","date":"2020-07-29T14:02:42.909Z","path":"categories/index.html","text":""},{"title":"Tags","date":"2020-07-29T14:02:42.909Z","path":"tags/index.html","text":""}],"posts":[{"title":"ulu","date":"2020-07-26T12:06:42.000Z","path":"2020/07/26/系统说明/ulu/ulu/","text":"前言ulu全称未ultlog-ui，是ultlog系统中展示日志的web程序。 安装下载点击此处下载。 如果部署在windows系统，可以选择下载ulu-nginx，其自带一个免安装版本的nginx。 安装将下载的文件解压到nginx的html路径下，目录结构为{base_path}/nginx/html/index.html 和 {base_path}/nginx/html/static 修改nginx配置文件中的反向代理配置，添加如下代码 123location ^~ &#x2F;api &#123; proxy_pass http:&#x2F;&#x2F;&#123;ula-host&#125;:&#123;ula-ip&#125;;&#125; 将其中ula-ip/port替换为ula服务部署的地址和端口 启动nginx1start nginx 更多更多关于ulu的信息可以访问ultlog文档中心查阅。","tags":[{"name":"ulu","slug":"ulu","permalink":"http://ultlog.com/tags/ulu/"}],"categories":[{"name":"系统说明","slug":"系统说明","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/"},{"name":"ulu","slug":"系统说明/ulu","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/ulu/"}]},{"title":"ula","date":"2020-07-26T12:04:42.000Z","path":"2020/07/26/系统说明/ula/ula/","text":"ula前置需要7.x版本的Elasticsearch 安装下载点击此处下载ula-0.0.1.jar 运行1java -jar -D\"ultlog.es.address.host=&#123;es-ip&#125;\" -D\"ultlog.es.address.port=&#123;es-port&#125;\" ula-0.0.1.jar 替换其中es-ip与es-port 个性化如果需要修改端口ip等配置信息可以在启动项加入 1-Dspring.port=8888 更建议创建一个配置文件在同级目录，修改配置更方便。 更多更多关于ulu的信息可以访问ultlog文档中心查阅。","tags":[{"name":"ula","slug":"ula","permalink":"http://ultlog.com/tags/ula/"}],"categories":[{"name":"系统说明","slug":"系统说明","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/"},{"name":"ula","slug":"系统说明/ula","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/ula/"}]},{"title":"searcher","date":"2020-07-26T12:02:42.000Z","path":"2020/07/26/系统说明/searcher/searcher/","text":"前言searcher 是ultlog系统中收集日志的一个程序。通过对系统中日志文件的监控，实时的将产生的日志发送到ula中。与collector不同，searcher不需要在工程中集成，转而在操作系统中集成。因此一些非基于logback的java项目（非常少）或非java项目也可以通过修改日志的格式而将日志托管给ultlog，享受ultlog带来的便利。 前置searcher使用java编写，因此在应用searcher的操作系统上需要jdk8以上的环境，若系统中没有以上环境则可以使用自带jdk的searcher包进行部署。 建议将执行脚本下载到内网，通过minio，ftp或http服务挂载，并以此编写自动集成脚本，具体可见自动集成实践。 如果有大量环境需要集成建议查看自动集成实践来快速编写自动集成脚本。 安装程序配置将要应用searcher的程序的logback日志格式应如下： 1%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%-5level] [%-5thread] %logger&#123;20&#125; - %msg%n&lt;&#x2F;pattern&gt; 如果非logback项目或非java项目应将日志格式调整为如此： 12342020-07-21 09:16:37 [ERROR] [pool-420-thread-7] c.t.g.h.HttpConnectionPoolUtil - test errorjava.lang.RuntimeException: test errorat com.example.demo.DemoApplicationTests.contextLoads(DemoApplicationTests.java:21).... 选择软件包 环境 软件包 &lt; jdk 1.8 searcher_jdk.tar.gz &gt;= jdk 1.8 searcher.tar.gz 无jdk searcher_jdk.tar.gz 手动/单机集成docker linux 使用exec等命令进入docker镜像 将下载好的软件包传入（可以在镜像内使用curl等命令进行下载） 解压文件 执行 sh searcher.sh {args} linux 将下载好的软件包传入 可以在镜像内使用curl等命令进行下载 解压文件 执行 sh searcher.sh {args}windows修改{searcher path}/application.yml，正确填写其中配置项执行语句启动script1java -jar searcher.jar 如果是非jdk8环境script1&#123;searcher_path&#125;/java -jar searcher.jar 自动集成实践配置项说明参数说明 使用配置文件使用配置文件即为将软件包内部的配置文件进行修改，然后存放到需要集成searcher的系统某个地址下，通过参数指定路径即可 参数 说明 是否必填 默认值 实例 -f , –file 配置文件的路径 √ /searcher/application.yml #### 直接传参 不使用配置文件直接通过以下参数启动searcher服务 参数 说明 是否必填 默认值 实例 -p , –path 产生日志文件的路径 √ /logs/ –pattern 日志文件的关键字 √ error.log –project 项目名称 √ ultlog -m , –module 模块名称 √ searcher –uuid 服务唯一属性 √ 4RFS23Q –max 同时监控的最多文件数 × 10 12 –level 收集日志的最低等级 × INFO WARN -u , –ula ula服务地址 √ http://192.168.2.2:8080/","tags":[{"name":"searcher","slug":"searcher","permalink":"http://ultlog.com/tags/searcher/"}],"categories":[{"name":"系统说明","slug":"系统说明","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/"},{"name":"searcher","slug":"系统说明/searcher","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/searcher/"}]},{"title":"未来规划","date":"2020-07-26T12:00:42.000Z","path":"2020/07/26/版本变更/feature/","text":"","tags":[{"name":"version feature","slug":"version-feature","permalink":"http://ultlog.com/tags/version-feature/"}],"categories":[{"name":"版本变更","slug":"版本变更","permalink":"http://ultlog.com/categories/%E7%89%88%E6%9C%AC%E5%8F%98%E6%9B%B4/"}]},{"title":"collector","date":"2020-07-26T12:00:42.000Z","path":"2020/07/26/系统说明/collector/collector/","text":"前言collector是基于logback开发的日志收集组件，适用于使用logback日志框架的系统。collector通过对logback框架中的appender接口扩展而将收集到的日志发送到ula系统。相比于searcher，collector能够适应更改多变的日志格式，并且在部署时不需要编写额外的脚本。 集成引入12345&lt;dependency&gt; &lt;groupId&gt;com.ultlog&lt;/groupId&gt; &lt;artifactId&gt;collector&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt;&lt;/dependency&gt; 集成在logback.xml/logback-test.xml等生效的logback配置文件中添加如下配置 1234567891011&lt;appender name=\"ultlog\" class=\"com.ultlog.collector.appender.UlaAppender\"&gt; &lt;param name=\"url\" value=\"&#123;ula&#125;/api/v1/log\"/&gt; &lt;param name=\"project\" value=\"&#123;project&#125;\"/&gt; &lt;param name=\"module\" value=\"&#123;module&#125;\"/&gt; &lt;param name=\"uuid\" value=\"&#123;uuid&#125;\"/&gt;&lt;/appender&gt;&lt;root level=\"ERROR\"&gt; &lt;appender-ref ref=\"ultlog\"/&gt;&lt;/root&gt; 异步处理日志如果想使用异步appender可以采用logback文档中appender文档中的AsyncAppender部分。 配置项说明 配置项 说明 ula ula服务的地址 project 项目名称 module 模块名称（如果非微服务项目可以与project相等） uuid 服务唯一属性 实例&lt;appender name=\"ultlog\" class=\"com.ultlog.collector.appender.AsyncEsAppender\"&gt; &lt;param name=\"threadPoolProviderName\" value=\"com.ultlog.collector.support.DefaultThreadPoolProvider\"/&gt; &lt;param name=\"url\" value=\"http://localhost:8080/api/v1/log\"/&gt; &lt;param name=\"project\" value=\"ula-test\"/&gt; &lt;param name=\"module\" value=\"ula-test\"/&gt; &lt;param name=\"uuid\" value=\"ula-test-uuid\"/&gt; &lt;/appender&gt;","tags":[{"name":"collector","slug":"collector","permalink":"http://ultlog.com/tags/collector/"}],"categories":[{"name":"系统说明","slug":"系统说明","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/"},{"name":"collector","slug":"系统说明/collector","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/collector/"}]},{"title":"v0.0.1","date":"2020-07-19T06:59:42.000Z","path":"2020/07/19/版本变更/v0-0-1/","text":"功能新增 增加了collector 增加了ulu 增加了ulu 通过collector完成了基本的日志收集与展示功能 功能变动无 解决问题无 其他该版本为预览版本，仅作功能演示用，因此仍有功能亟待开发，部分低优先级问题将在v1.0.0版本统一解决。","tags":[{"name":"version","slug":"version","permalink":"http://ultlog.com/tags/version/"}],"categories":[{"name":"版本变更","slug":"版本变更","permalink":"http://ultlog.com/categories/%E7%89%88%E6%9C%AC%E5%8F%98%E6%9B%B4/"}]},{"title":"v1.0.0","date":"2020-07-19T06:59:42.000Z","path":"2020/07/19/版本变更/v1-0-0/","text":"","tags":[{"name":"version","slug":"version","permalink":"http://ultlog.com/tags/version/"}],"categories":[{"name":"版本变更","slug":"版本变更","permalink":"http://ultlog.com/categories/%E7%89%88%E6%9C%AC%E5%8F%98%E6%9B%B4/"}]},{"title":"ultlog","date":"2020-07-19T06:19:01.000Z","path":"2020/07/19/index/","text":"前言ultlog是一个日志收集，过滤，展示的系统。基于高性能地Elasticsearch以及logback等java框架，可以快速地对线上日志数据进行收集，并且提供ula页面进行日志地展示。相比于原始地日志系统/框架，ultlog有如下优势： 分布式系统日志能够地统一收集 避免了登录虚拟机/跳板机查询日志 可以通过时间或关键字进行日志检索，省去了编写查询语句的时间 可以以服务/模块/系统唯一标识等属性区分日志，方便微服务架构下日志的准确查找 开始使用 架构日志数据流转 searchersearcher 是ultlog系统中收集日志的一个程序。通过对系统中日志文件的监控，实时的将产生的日志发送到ula中。与collector不同，searcher不需要在工程中集成，转而在操作系统中集成。因此一些非基于logback的java项目（非常少）或非java项目也可以通过修改日志的格式而将日志托管给ultlog，享受ultlog带来的便利。 collectorcollector是基于logback开发的日志收集组件，适用于使用logback日志框架的系统。collector通过对logback框架中的appender接口扩展而将收集到的日志发送到ula系统。相比于searcher，collector能够适应更改多变的日志格式，并且在部署时不需要编写额外的脚本。 ulaula为ultlog系统中的日志与网络请求处理服务，收集到的日志通过ula存储进Elasticsearch数据库，并且通过Restful风格的接口对外提供查询功能。 uluulu为ultlog系统日志展示程序。可以通过系统名称，日志产生时间，日志信息等多个维度进行日志的查询。 开始使用ula部署说明ulu部署说明collector部署说明searcher部署说明 未来规划更多新功能正在开发，欢迎通过未来规划查阅。","tags":[],"categories":[]}],"categories":[{"name":"系统说明","slug":"系统说明","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/"},{"name":"ulu","slug":"系统说明/ulu","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/ulu/"},{"name":"ula","slug":"系统说明/ula","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/ula/"},{"name":"searcher","slug":"系统说明/searcher","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/searcher/"},{"name":"版本变更","slug":"版本变更","permalink":"http://ultlog.com/categories/%E7%89%88%E6%9C%AC%E5%8F%98%E6%9B%B4/"},{"name":"collector","slug":"系统说明/collector","permalink":"http://ultlog.com/categories/%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E/collector/"}],"tags":[{"name":"ulu","slug":"ulu","permalink":"http://ultlog.com/tags/ulu/"},{"name":"ula","slug":"ula","permalink":"http://ultlog.com/tags/ula/"},{"name":"searcher","slug":"searcher","permalink":"http://ultlog.com/tags/searcher/"},{"name":"version feature","slug":"version-feature","permalink":"http://ultlog.com/tags/version-feature/"},{"name":"collector","slug":"collector","permalink":"http://ultlog.com/tags/collector/"},{"name":"version","slug":"version","permalink":"http://ultlog.com/tags/version/"}]}